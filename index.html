<html>
<style>
    html,
    body {
        width: 100%;
        height: 100%;
        margin: 0;
        background-color: #202020;
        color: #93a1a1;
    }

    canvas {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: auto;
        height: auto;
        max-width: 100%;
        max-height: 90%;
    }
</style>

<head>
    <title>
        sEngine
    </title>
</head>

<body>

    <!-- <div id="debug">
        <div id="btns"> </div>
        <br>
        <div id="cameraInfo"> </div>
        <div id="playerInfo"> </div>
        <div id="colliding"> </div>
    </div> 
    -->
    <script src='src/Vector2.js'>
    </script>

    <script src='src/utils.js'>
    </script>

    <script src='src/Entity.js'>
    </script>

    <script src='src/Constants.js'>
    </script>

    <script src='src/Camera.js'>
    </script>

    <script src='src/p5.min.js'>
    </script>

    <script src='src/p5.sound.min.js'>
    </script>

    <script src='src/p5.dom.min.js'>
    </script>

    <script src='src/main.js'>
    </script>

    <div id="p5_loading" class="center">
        <canvas id="canvas" width=250 height=250> </canvas>
        <script>
            var canvasLoader = function () {

                var self = this;
                window.requestAnimFrame = function () { return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (a) { window.setTimeout(a, 1E3 / 60) } }();

                self.init = function () {
                    self.canvas = document.getElementById('canvas');
                    self.ctx = self.canvas.getContext('2d');
                    self.ctx.lineWidth = .1;
                    self.ctx.strokeStyle = 'rgba(245,244,240,.75)';
                    self.count = 50;
                    self.rotation = 270 * (Math.PI / 180);
                    self.speed = 3;
                    self.canvasLoop();
                };

                self.updateLoader = function () {
                    self.rotation += self.speed / 100;
                };

                self.renderLoader = function () {
                    self.ctx.save();
                    self.ctx.globalCompositeOperation = 'source-over';
                    self.ctx.translate(125, 125);
                    self.ctx.rotate(self.rotation);
                    var i = self.count;
                    while (i--) {
                        self.ctx.beginPath();
                        self.ctx.arc(0, 0, i + (Math.random() * 35), Math.random(), Math.PI / 3 + (Math.random() / 12), false);
                        self.ctx.stroke();
                    }
                    self.ctx.restore();
                };

                self.canvasLoop = function () {
                    requestAnimFrame(self.canvasLoop, self.canvas);
                    self.ctx.globalCompositeOperation = 'destination-out';
                    self.ctx.fillStyle = 'rgba(0,0,0,.03)';
                    self.ctx.fillRect(0, 0, 250, 250);
                    self.updateLoader();
                    self.renderLoader();
                };

            };

            var loader = new canvasLoader();
            loader.init();
        </script>
    </div>

</body>

</html>